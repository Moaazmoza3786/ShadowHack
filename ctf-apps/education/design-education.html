<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OWASP Education - Insecure Design</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            background: #0a0e27;
            color: #fff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .theory-section {
            background: #1a1f3a;
            padding: 30px;
            height: 100vh;
            overflow-y: auto;
            border-left: 3px solid #667eea;
        }

        .lab-section {
            background: #0f1729;
            padding: 30px;
            height: 100vh;
            overflow-y: auto;
        }

        .task-item {
            background: #252b4a;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-right: 4px solid #666;
        }

        .task-item.completed {
            border-right-color: #00ff88;
        }

        .task-item input[type="checkbox"] {
            width: 20px;
            height: 20px;
            margin-left: 10px;
        }

        .hint-btn {
            background: #ff9500;
            border: none;
            margin: 5px;
        }

        .hint-content {
            background: #2a3150;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            display: none;
        }

        .flag-input {
            background: #1a1f3a;
            border: 2px solid #667eea;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
        }

        .btn-submit {
            background: #00ff88;
            color: #000;
            font-weight: bold;
        }

        .product-card {
            background: #1a1f3a;
            padding: 30px;
            border-radius: 10px;
            border: 2px solid #667eea;
        }

        .code-block {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            color: #00ff88;
            font-family: 'Courier New', monospace;
            margin: 10px 0;
        }

        h2,
        h3 {
            color: #667eea;
        }

        .badge-task {
            background: #667eea;
            color: #fff;
            padding: 5px 10px;
            border-radius: 15px;
        }

        .price {
            font-size: 2em;
            color: #00ff88;
            font-weight: bold;
        }
    </style>
</head>

<body>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-5 theory-section">
                <h2><i class="fas fa-brain"></i> Ø§Ù„Ù†Ø¸Ø±ÙŠØ©: ØªØµÙ…ÙŠÙ… ØºÙŠØ± Ø¢Ù…Ù†</h2>
                <p class="lead">Insecure Design & Logic Flaws</p>

                <div class="mb-4">
                    <h3>ğŸ§  Ù…Ø§ Ù‡ÙŠ Ø§Ù„Ø«ØºØ±Ø§Øª Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠØ©ØŸ</h3>
                    <p>Ù‡ÙŠ Ù„ÙŠØ³Øª Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„ÙƒÙˆØ¯ (Syntax Errors)ØŒ Ø¨Ù„ Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ <strong>Ø·Ø±ÙŠÙ‚Ø© Ø§Ù„ØªÙÙƒÙŠØ±</strong>! Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙƒØªØ¨
                        Ø§Ù„ÙƒÙˆØ¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ØŒ Ù„ÙƒÙ†Ù‡ Ù„Ù… ÙŠØªÙˆÙ‚Ø¹ ÙƒÙŠÙ Ø³ÙŠØ³ØªØ®Ø¯Ù…Ù‡ Ø§Ù„Ù‡Ø§ÙƒØ±.</p>
                </div>

                <div class="mb-4">
                    <h3>ğŸ›’ Ù…Ø«Ø§Ù„ Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ</h3>
                    <div class="alert alert-info">
                        <p class="mb-0">
                            ØªØ®ÙŠÙ„ Ù…ØªØ¬Ø±Ø§Ù‹ ÙŠØ¹Ø·ÙŠÙƒ Ø®ØµÙ… <strong>10%</strong>. <br>
                            Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙÙƒØ±: "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø³ÙŠØ¶ØºØ· Ø§Ù„Ø²Ø± Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©". <br>
                            Ø§Ù„Ù‡Ø§ÙƒØ± ÙÙƒØ±: "Ù…Ø§Ø°Ø§ Ù„Ùˆ Ø¶ØºØ·Øª Ø§Ù„Ø²Ø± <strong>100 Ù…Ø±Ø©</strong>ØŸ" ğŸ¤”
                        </p>
                    </div>
                    <div class="code-block text-center">
                        $1000 - 10% = $900 <br>
                        $900 - 10% = $810 <br>
                        ... <br>
                        $0.01 - 10% = $0.00 ğŸ¤‘
                    </div>
                </div>

                <div class="mb-4">
                    <h3>ğŸ› ï¸ Ø§Ù„ÙƒÙˆØ¯: Ø§Ù„Ù…ØµØ§Ø¨ vs Ø§Ù„Ø¢Ù…Ù†</h3>
                    <div class="card bg-dark border-danger mb-3">
                        <div class="card-header bg-danger text-white">
                            <i class="fas fa-times-circle"></i> ÙƒÙˆØ¯ Ù…ØµØ§Ø¨ (Vulnerable)
                        </div>
                        <div class="card-body code-block my-0">
                            // ÙŠØ®ØµÙ… Ù…Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ ÙÙŠ ÙƒÙ„ Ù…Ø±Ø©!<br>
                            function applyCoupon() {<br>
                            &nbsp;&nbsp;currentPrice = currentPrice * 0.90;<br>
                            }
                        </div>
                    </div>

                    <div class="card bg-dark border-success mb-3">
                        <div class="card-header bg-success text-white">
                            <i class="fas fa-check-circle"></i> ÙƒÙˆØ¯ Ø¢Ù…Ù† (Secure)
                        </div>
                        <div class="card-body code-block my-0">
                            // ÙŠØ­Ø³Ø¨ Ø§Ù„Ø®ØµÙ… Ù…Ù† Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©<br>
                            function applyCoupon() {<br>
                            &nbsp;&nbsp;if (!couponUsed) {<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;finalPrice = originalPrice * 0.90;<br>
                            &nbsp;&nbsp;&nbsp;&nbsp;couponUsed = true;<br>
                            &nbsp;&nbsp;}<br>
                            }
                        </div>
                    </div>
                </div>

                <div class="mb-4">
                    <h3>âœ… Ø§Ù„Ù…Ù‡Ø§Ù… Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©</h3>
                    <div class="task-item" id="task1">
                        <input type="checkbox" id="check1">
                        <label><span class="badge-task">1</span> Ø¬Ø±Ø¨ ØªØ·Ø¨ÙŠÙ‚ ÙƒÙˆØ¨ÙˆÙ† Ø§Ù„Ø®ØµÙ… Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ø©</label>
                    </div>
                    <div class="task-item" id="task2">
                        <input type="checkbox" id="check2">
                        <label><span class="badge-task">2</span> Ø§Ø³ØªØºÙ„ Ø§Ù„Ø«ØºØ±Ø© Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ù†ØªØ¬ Ù…Ø¬Ø§Ù†Ø§Ù‹ ($0)</label>
                    </div>
                </div>

                <div class="mb-4">
                    <h3>ğŸ’¡ Ø§Ù„ØªÙ„Ù…ÙŠØ­Ø§Øª</h3>
                    <div class="d-flex gap-2">
                        <button class="btn hint-btn flex-grow-1" onclick="showHint(1)">ØªÙ„Ù…ÙŠØ­ 1</button>
                        <button class="btn hint-btn flex-grow-1" onclick="showHint(2)">Ø§Ù„Ø­Ù„</button>
                    </div>
                    <div class="hint-content" id="hint1">
                        ğŸ’¡ Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ø­Ø¯ Ù„Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„ÙƒÙˆØ¨ÙˆÙ†. Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„Ø¶ØºØ·!
                    </div>
                    <div class="hint-content" id="hint2">
                        ğŸ¯ Ø§Ù„Ø­Ù„: Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± "ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ…" Ø­ÙˆØ§Ù„ÙŠ 60-70 Ù…Ø±Ø© Ø­ØªÙ‰ ÙŠØµØ¨Ø­ Ø§Ù„Ø³Ø¹Ø± 0ØŒ Ø«Ù… Ø§Ø¶ØºØ· "Ø§Ù„Ø¯ÙØ¹".
                    </div>
                </div>

                <div class="mb-4">
                    <h3>ğŸ¯ Ø£Ø¯Ø®Ù„ Ø§Ù„Ù€ Flag</h3>
                    <div class="input-group mb-2">
                        <span class="input-group-text bg-dark text-light border-primary"><i
                                class="fas fa-flag"></i></span>
                        <input type="text" class="form-control flag-input" id="flagInput" placeholder="FLAG{...}">
                    </div>
                    <button class="btn btn-submit w-100" onclick="checkFlag()">ØªØ­Ù‚Ù‚</button>
                    <div id="flagResult" class="mt-2"></div>
                </div>

                <div class="mb-4">
                    <h3>ğŸ›¡ï¸ ÙƒÙŠÙ ØªØ­Ù…ÙŠ Ù†ÙØ³ÙƒØŸ</h3>
                    <ul>
                        <li>ğŸ¤” <strong>Threat Modeling:</strong> ØªÙˆÙ‚Ø¹ ÙƒÙŠÙ ÙŠÙ…ÙƒÙ† Ø¥Ø³Ø§Ø¡Ø© Ø§Ø³ØªØ®Ø¯Ø§Ù… Ù†Ø¸Ø§Ù…Ùƒ.</li>
                        <li>âœ… <strong>Server-Side Validation:</strong> Ù„Ø§ ØªØ¹ØªÙ…Ø¯ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø£Ù…Ø§Ù…ÙŠØ© Ø£Ø¨Ø¯Ø§Ù‹ ÙÙŠ Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª
                            Ø§Ù„Ù…Ø§Ù„ÙŠØ©.</li>
                        <li>ğŸš« <strong>Rate Limiting:</strong> Ø§Ù…Ù†Ø¹ ØªÙƒØ±Ø§Ø± Ø§Ù„Ø·Ù„Ø¨Ø§Øª Ø¨Ø´ÙƒÙ„ Ø¬Ù†ÙˆÙ†ÙŠ.</li>
                    </ul>
                </div>
            </div>

            <div class="col-md-7 lab-section">
                <h2><i class="fas fa-flask"></i> Ø§Ù„Ù„Ø§Ø¨ Ø§Ù„Ø¹Ù…Ù„ÙŠ</h2>
                <div class="product-card mt-4">
                    <h3 class="text-center">ğŸ’» Super Laptop Pro</h3>
                    <div class="text-center my-4">
                        <div class="price" id="price">$2000.00</div>
                        <p class="text-muted">Ø§Ù„Ø³Ø¹Ø± Ø§Ù„Ø£ØµÙ„ÙŠ: <del>$2000.00</del></p>
                    </div>

                    <div class="alert alert-warning text-center">
                        <i class="fas fa-ticket-alt"></i> Ø¹Ø±Ø¶ Ø®Ø§Øµ! Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ÙƒÙˆØ¨ÙˆÙ† <strong>SAVE10</strong> Ù„Ø®ØµÙ… 10%
                    </div>

                    <div class="mb-3">
                        <div class="input-group">
                            <input type="text" class="form-control flag-input" value="SAVE10" readonly>
                            <button class="btn btn-warning" onclick="applyDiscount()">
                                <i class="fas fa-tag"></i> ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø®ØµÙ…
                            </button>
                        </div>
                        <small class="text-muted" id="discountCountMsg">Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø®ØµÙ…: 0</small>
                    </div>

                    <hr>

                    <button class="btn btn-success w-100 btn-lg" onclick="checkout()">
                        <i class="fas fa-shopping-cart"></i> Ø¥ØªÙ…Ø§Ù… Ø§Ù„Ø´Ø±Ø§Ø¡ ÙˆØ§Ù„Ø¯ÙØ¹
                    </button>
                    <div id="message" class="mt-3"></div>
                </div>
                <button class="btn btn-secondary mt-3" onclick="resetLab()">Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            </div>
        </div>
    </div>

    <script>
        let currentPrice = 2000;
        let discountCount = 0;
        let tasks = [false, false];

        function applyDiscount() {
            // Vulnerable Logic: Applies discount to the CURRENT price repeatedly
            discountCount++;
            currentPrice = currentPrice * 0.9;

            // Rounding issue simulation
            if (currentPrice < 0.01) currentPrice = 0;

            document.getElementById('price').textContent = '$' + currentPrice.toFixed(2);
            document.getElementById('discountCountMsg').textContent = `Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø®ØµÙ…: ${discountCount}`;

            if (!tasks[0]) {
                tasks[0] = true;
                document.getElementById('task1').classList.add('completed');
                document.getElementById('check1').checked = true;
            }
        }

        function checkout() {
            const msgDiv = document.getElementById('message');

            if (currentPrice <= 0) {
                msgDiv.innerHTML = `
                    <div class="alert alert-success border-success">
                        <h4><i class="fas fa-gift"></i> Ù…Ø¨Ø±ÙˆÙƒ!</h4>
                        <p>Ù„Ù‚Ø¯ Ø­ØµÙ„Øª Ø¹Ù„Ù‰ Ø§Ù„Ù„Ø§Ø¨ØªÙˆØ¨ Ù…Ø¬Ø§Ù†Ø§Ù‹! Ø§Ù„Ù…Ø¨Ø±Ù…Ø¬ ÙŠØ¨ÙƒÙŠ Ø§Ù„Ø¢Ù† ğŸ˜­</p>
                        <div class="code-block mt-2 fs-5">FLAG{logic_flaw_exploited}</div>
                    </div>
                `;
                if (!tasks[1]) {
                    tasks[1] = true;
                    document.getElementById('task2').classList.add('completed');
                    document.getElementById('check2').checked = true;
                }
            } else {
                msgDiv.innerHTML = `
                    <div class="alert alert-info">
                        Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ù„Ø¯ÙØ¹... Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: <strong>$${currentPrice.toFixed(2)}</strong>
                        <br><small>(Ø­Ø§ÙˆÙ„ Ø¬Ø¹Ù„ Ø§Ù„Ø³Ø¹Ø± 0 Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù€ Flag)</small>
                    </div>
                `;
            }
        }

        function showHint(n) { document.getElementById('hint' + n).style.display = 'block'; }

        function checkFlag() {
            const input = document.getElementById('flagInput').value.trim();
            const result = document.getElementById('flagResult');
            if (input === 'FLAG{logic_flaw_exploited}') {
                result.innerHTML = '<div class="alert alert-success"><i class="fas fa-trophy"></i> ØµØ­ÙŠØ­! ğŸ‰</div>';
            } else if (input) {
                result.innerHTML = '<div class="alert alert-danger">Ø®Ø·Ø£!</div>';
            }
        }

        function resetLab() {
            currentPrice = 2000;
            discountCount = 0;
            tasks = [false, false];
            document.getElementById('price').textContent = '$2000.00';
            document.getElementById('discountCountMsg').textContent = 'Ø¹Ø¯Ø¯ Ù…Ø±Ø§Øª Ø§Ù„Ø®ØµÙ…: 0';
            document.getElementById('message').innerHTML = '';
            document.querySelectorAll('.task-item').forEach(t => t.classList.remove('completed'));
            document.querySelectorAll('input[type="checkbox"]').forEach(c => c.checked = false);
            document.querySelectorAll('.hint-content').forEach(h => h.style.display = 'none');
            document.getElementById('flagInput').value = '';
            document.getElementById('flagResult').innerHTML = '';
        }
    </script>
</body>

</html>